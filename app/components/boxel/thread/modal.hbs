<BoxelModal @onClose={{@onClose}} @class="thread-modal {{if this.expanded "thread-modal--full-width"}}">
  {{!-- OnClick action is temporarily added for demo's sake. --}}
  <Boxel::Thread class="thread-modal__inner" {{on "click" this.updateProgress}} as |t|>
    <t.header
      @title={{@model.workflow.title}}
      @toggleExpand={{this.toggleExpand}}
      @expanded={{this.expanded}}
    >
    </t.header>

    <t.content>
      <Boxel::Thread::DateDivider @date={{this.startTimestamp}} />

      {{#each @model.workflow.milestones as |milestone i|}}
        {{#if (and (lte i this.progress) milestone.message)}}
          <Boxel::Thread::Message
            @contents={{milestone.message}}
            @datetime={{milestone.datetime}}
            @hasLogo={{true}}
          />
        {{/if}}
      {{/each}}
    </t.content>

    <t.sidebar>
      <Boxel::Thread::ProgressBox
        @title={{@model.workflow.title}}
        @status={{this.progressStatus}}
        @milestones={{@model.workflow.milestones}}
        @completedCount={{this.progress}}
      />

      <Boxel::Thread::ParticipantsBox
        @addAction={{true}}
      as |participantsBox|>
        <participantsBox.participants
          @participants={{@model.participants}}
        />
        <participantsBox.participants
          @participants={{@model.orgRepresentatives}}
        />
      </Boxel::Thread::ParticipantsBox>
    </t.sidebar>

  </Boxel::Thread>
</BoxelModal>