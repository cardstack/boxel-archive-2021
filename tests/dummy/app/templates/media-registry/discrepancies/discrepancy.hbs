<section class="discrepancy">
  <div class="discrepancy__container">
    <header class="discrepancy__header">
      <h1 class="versions__title">Discrepancy Card: Missing Data</h1>
      <div class="versions__mode">
        <LinkTo @route="media-registry.item.musical-work" @model={{@model.baseCard}} @class="mode-indicator mode-indicator--revision">
          Comparison Mode
        </LinkTo>
      </div>
    </header>

    <Breadcrumbs>
      <LinkTo @route="media-registry" @class="breadcrumbs__item">
        <div class="breadcrumbs__item-label">Collection</div>
        <div class="breadcrumbs__item-title">Master Recordings</div>
      </LinkTo>
      <span class="breadcrumbs__carot" />
      <LinkTo @route="media-registry.item" @model={{@model.baseCard.itemId}} @class="breadcrumbs__item">
        <div class="breadcrumbs__item-label">Master Detail</div>
        <div class="breadcrumbs__item-title">{{@model.baseCard.title}}</div>
      </LinkTo>
      <span class="breadcrumbs__carot" />
      <LinkTo @route="media-registry.item.musical-work" @model={{@model.baseCard.itemId}} @class="breadcrumbs__item">
        <div class="breadcrumbs__item-label">Musical Work</div>
        <div class="breadcrumbs__item-title">{{@model.baseCard.title}}</div>
      </LinkTo>
    </Breadcrumbs>

    <div>
      <div>
        Reconcile between these 2 versions
      </div>
      <div class="discrepancy__cards">
        {{!-- <DetailCard
          @fields={{@model.baseCard.isolatedFields}}
          @class="discrepancy-view"
          @mode="view"
        />

        <DetailCard
          @fields={{@model.compCard.isolatedFields}}
          @class="discrepancy-view"
          @mode="view"
          @comparisonMode={{true}}
        /> --}}

        {{#each @model.baseCard.isolatedFields as |field|}}
          <div class="discrepancy-field">
            <FieldRenderer
              @mode="view"
              @class="base-card"
              @field={{field}}
              @expandAction={{@expandAction}}
            />
          </div>
          <div class="discrepancy-field">
            {{#with (find-by "title" field.title @model.compCard.isolatedFields) as |compField|}}
              {{log compField}}
              <FieldRenderer
                @mode="view"
                @class="comp-card"
                @comparisonMode={{true}}
                @field={{compField}}
                @expandAction={{@expandAction}}
              />
            {{/with}}
          </div>
        {{/each}}
      </div>
    </div>
  </div>
</section>