{{#if (eq this.target.currentRouteName "media-registry.item.versions")}}
  {{outlet}}
{{else}}
  <div class="item__wrapper {{if (eq this.target.currentRouteName "media-registry.item.edit") "item__wrapper--no-scroll"}}">

    {{!-- Breadcrumbs --}}
    <div class="breadcrumbs">
      <LinkTo @route="media-registry" @class="breadcrumbs__pill">Master Recordings</LinkTo>
      {{#if @model.fromCollectionId}}
        <span class="breadcrumbs__carot" />
        <LinkTo @route="media-registry.collection" @model={{@model.fromCollectionId}} @class="breadcrumbs__pill">
          {{titleize (humanize @model.fromCollectionId)}}
        </LinkTo>
      {{/if}}
      <span class="breadcrumbs__carot" />
      <button {{on "click" this.transitionToView}} class="breadcrumbs__pill {{if (not-eq this.target.currentRouteName "media-registry.item.musical-work") "breadcrumbs__pill--current"}}">Master Detail</button>
      {{#if (eq this.target.currentRouteName "media-registry.item.musical-work")}}
        <span class="breadcrumbs__carot" />
        <div class="breadcrumbs__pill breadcrumbs__pill--current">Musical Work</div>
      {{/if}}
    </div>

    {{#if (eq this.target.currentRouteName "media-registry.item.musical-work")}}
      <Boxel>
        {{!-- Detail Card Layout --}}
        <div class="detail-card__layout detail-card__layout--stacked">

          {{!-- Detail Card --}}
          <Boxel @class="detail-card detail-card--stacked">
            <header class="detail-card__header">
              <div>Master Detail - {{titleize this.model.song_title}}</div>
              <button {{on "click" this.transitionToView}} class="breadcrumbs__pill">Back to Master Detail</button>
            </header>
            <div class="detail-card__body" />
          </Boxel>
        </div>

        {{!-- Nested Detail Card --}}
        {{outlet}}
      </Boxel>

    {{else}}
      {{!-- Detail Card Layout --}}
      <section class="detail-card__layout">
        <MusicDetailCard
          @mode="view"
          @model={{this.model}}
          @itemId={{this.itemId}}
          @displayFullHeader={{true}}
        >
          <BoxelActions
            @class="media-collection__btn-overlay"
            @displayHighlightActions={{true}}
            @btnLeft="mode-btn"
            @btnLeftContent="Edit"
            @btnLeftAction={{this.transitionToEdit}}
            @btnRight="settings"
            @versionHistory={{true}}
          />
        </MusicDetailCard>

        {{!-- Related Cards Sidebar --}}
        <aside class="item__sidebar">
          <h3 class="item__sidebar-title">In these collections</h3>
          <div>
            {{#each @model.catalog as |catalog i|}}
              <SidebarRelatedCard
                @type="catalog"
                @title={{catalog}}
                @route="media-registry.collection"
                @routeModel={{dasherize (trim catalog)}}
                @subtitle={{get @model.catalogSubtitles i}}
                @count={{get @model.catalogCounts i}} />
            {{/each}}
          </div>
        </aside>
      </section>
    {{/if}}
  </div>

  {{!-- Edit modal --}}
  {{#if (not-eq this.target.currentRouteName "media-registry.item.musical-work")}}
    {{outlet}}
  {{/if}}
{{/if}}